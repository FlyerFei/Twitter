<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Tweet it Better!</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <style>
        #tweetbox {
			position:relative;
		    top: 35%;
		    left: 35%;
		    height: 250px;
        }
/*        textarea {   
	    	width: 400px;  
	    	max-width: 400px;  
	    	height: 150px;  
	    	line-height: 150%; 

	    	padding: 9px;  
		    border: solid 1px #E5E5E5;  
		    outline: 0;  
		    font: normal 13px/100% Verdana, Tahoma, sans-serif;  
		    background: #FFFFFF;   
	    }  */

	    textarea {   
		    padding: 9px;  
		    border: solid 1px #E5E5E5;  
		    outline: 0;  
		    font: normal 13px/100% Verdana, Tahoma, sans-serif;  
		    width: 200px;  

		    background: -webkit-gradient(linear, left top, left 25, from(#FFFFFF), color-stop(4%, #EEEEEE), to(#FFFFFF));  
		    background: -moz-linear-gradient(top, #FFFFFF, #EEEEEE 1px, #FFFFFF 25px);  
		    box-shadow: rgba(0,0,0, 0.1) 0px 0px 8px;  
		    -moz-box-shadow: rgba(0,0,0, 0.1) 0px 0px 8px;  
		    -webkit-box-shadow: rgba(0,0,0, 0.1) 0px 0px 8px;  
	    }  

	    textarea {   
		    width: 400px;  
		    max-width: 400px;  
		    height: 150px;  
		    line-height: 150%;  
	    }  
  
		input:hover, textarea:hover,  
		input:focus, textarea:focus {   
		    border-color: #C9C9C9;   
		    -webkit-box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 8px;  
		    } 

		#map_button {
			position: absolute;
    		bottom: 0;
		    left: 0;
		}

  

		body {
			background-color: pink;
			font-family: impact;
		}
		</style>
    </head>

    <script type="text/javascript" src="https://www.dropbox.com/static/api/1/dropins.js" id="dropboxjs" data-app-key="ly9yrt03vretujv">
    </script>

    <body>
    	 <div id = "tweetbox">
    	 	<h2>Tweet here!</h2>
    	 	<textarea name="tweet" id = "tweet"></textarea> 
    	 	<button type="button" id='map_button' >Map</button>
    	 	<input type="dropbox-chooser" name="selected-file" style="visibility: hidden;"/>
    	 </div>

<!--     	 <div id = "copybox">
    	 	<textarea id = "copy"></textarea> 
    	 </div> -->


    <script type="text/javascript">
		$(document).ready(function () {
	       $('#tweet').keyup(function () {
				var tweet_text = $('#tweet').val();
				//search for special keys
				// 1. map (`!)
				if (tweet_text.match(/`\!([^ ]*)/)) {
					var special_key_map = tweet_text.match(/`\!([^ ]*)/)[1];	

				}

				// 2. dropbox - upload (`^)
				if (tweet_text.match(/`\^([^ ]*)/)) {
					var special_key_map = tweet_text.match(/`\^([^ ]*)/)[1];
					var options = {
            			// Required. Called when a user selects an item in the Chooser.
            			success: function(files) {
                		alert("Here's the file link:" + files[0].link)
            		}
            }	
					Dropbox.choose(options.success);

					// 1. upload photos

					// 2. upload docs
				}
	        });
	       $('#map_button').click(function () {
	       		
	       });
		});
    </script>
    
    </body>
</html>